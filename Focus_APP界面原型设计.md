# Focus APP ÁïåÈù¢ÂéüÂûãËÆæËÆ°

## üé® ÁïåÈù¢ËÆæËÆ°ËßÑËåÉ

### È¢úËâ≤‰∏ªÈ¢ò
```kotlin
// ‰∏ªÈ¢òÈ¢úËâ≤ÂÆö‰πâ
val FocusColors = lightColorScheme(
    primary = Color(0xFFE60012),        // Â∞èÁ∫¢‰π¶Á∫¢
    onPrimary = Color.White,
    primaryContainer = Color(0xFFFFE8E8),
    onPrimaryContainer = Color(0xFF410001),
    
    secondary = Color(0xFF77574A),       // ËæÖÂä©Ëâ≤
    onSecondary = Color.White,
    secondaryContainer = Color(0xFFFFDDD1),
    onSecondaryContainer = Color(0xFF2C160C),
    
    background = Color(0xFFFFFBFF),      // ËÉåÊôØËâ≤
    onBackground = Color(0xFF1F1B16),
    surface = Color(0xFFFFFBFF),
    onSurface = Color(0xFF1F1B16),
    
    outline = Color(0xFF85736B),
    outlineVariant = Color(0xFFD7C2B8)
)
```

### Â≠ó‰ΩìËßÑËåÉ
```kotlin
val FocusTypography = Typography(
    displayLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 57.sp,
        lineHeight = 64.sp,
        letterSpacing = (-0.25).sp,
    ),
    headlineLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 32.sp,
        lineHeight = 40.sp,
        letterSpacing = 0.sp,
    ),
    bodyLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 16.sp,
        lineHeight = 24.sp,
        letterSpacing = 0.5.sp,
    ),
    labelLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Medium,
        fontSize = 14.sp,
        lineHeight = 20.sp,
        letterSpacing = 0.1.sp,
    )
)
```

## üì± ËØ¶ÁªÜÁïåÈù¢ËÆæËÆ°

### 1. ‰∏ªÁïåÈù¢ (MainActivity.kt)

```kotlin
@Composable
fun MainScreen(
    viewModel: MainViewModel = viewModel(),
    onNavigateToSearch: () -> Unit,
    onNavigateToSettings: () -> Unit
) {
    val uiState by viewModel.uiState.collectAsState()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState())
    ) {
        // È°∂ÈÉ®Ê†áÈ¢ò
        Text(
            text = "Focus",
            style = MaterialTheme.typography.headlineLarge,
            color = MaterialTheme.colorScheme.primary,
            modifier = Modifier.padding(bottom = 32.dp)
        )
        
        // ÊêúÁ¥¢Âå∫Âüü
        SearchSection(
            onSearchClick = onNavigateToSearch,
            modifier = Modifier.padding(bottom = 32.dp)
        )
        
        // Âπ≥Âè∞ÈÄâÊã©Âå∫Âüü
        PlatformSelector(
            selectedPlatform = uiState.selectedPlatform,
            onPlatformSelected = { viewModel.selectPlatform(it) },
            modifier = Modifier.padding(bottom = 32.dp)
        )
        
        // ‰ΩøÁî®ÁªüËÆ°Âå∫Âüü
        UsageStatsSection(
            todayUsage = uiState.todayUsage,
            platformUsage = uiState.platformUsage,
            modifier = Modifier.padding(bottom = 32.dp)
        )
        
        // Â∫ïÈÉ®ÂØºËà™
        BottomNavigation(
            onSettingsClick = onNavigateToSettings,
            onAboutClick = { /* ÊòæÁ§∫ÂÖ≥‰∫éÂØπËØùÊ°Ü */ }
        )
    }
}

@Composable
fun SearchSection(
    onSearchClick: () -> Unit,
    modifier: Modifier = Modifier
) {
    Column(modifier = modifier) {
        OutlinedTextField(
            value = "",
            onValueChange = { },
            placeholder = { Text("ÊêúÁ¥¢ÂÖ≥ÈîÆËØç...") },
            modifier = Modifier
                .fillMaxWidth()
                .padding(bottom = 16.dp),
            singleLine = true,
            leadingIcon = {
                Icon(Icons.Default.Search, contentDescription = "ÊêúÁ¥¢")
            }
        )
        
        Button(
            onClick = onSearchClick,
            modifier = Modifier.fillMaxWidth(),
            colors = ButtonDefaults.buttonColors(
                containerColor = MaterialTheme.colorScheme.primary
            )
        ) {
            Text("ÊêúÁ¥¢", color = Color.White)
        }
    }
}

@Composable
fun PlatformSelector(
    selectedPlatform: String,
    onPlatformSelected: (String) -> Unit,
    modifier: Modifier = Modifier
) {
    Column(modifier = modifier) {
        Text(
            text = "ÈÄâÊã©ÊêúÁ¥¢Âπ≥Âè∞",
            style = MaterialTheme.typography.titleMedium,
            modifier = Modifier.padding(bottom = 8.dp)
        )
        
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceEvenly
        ) {
            PlatformButton(
                name = "Â∞èÁ∫¢‰π¶",
                icon = R.drawable.ic_xiaohongshu,
                isSelected = selectedPlatform == "xiaohongshu",
                onClick = { onPlatformSelected("xiaohongshu") }
            )
            
            PlatformButton(
                name = "ÊäñÈü≥",
                icon = R.drawable.ic_douyin,
                isSelected = selectedPlatform == "douyin",
                onClick = { onPlatformSelected("douyin") }
            )
            
            PlatformButton(
                name = "BÁ´ô",
                icon = R.drawable.ic_bilibili,
                isSelected = selectedPlatform == "bilibili",
                onClick = { onPlatformSelected("bilibili") }
            )
        }
    }
}

@Composable
fun PlatformButton(
    name: String,
    icon: Int,
    isSelected: Boolean,
    onClick: () -> Unit
) {
    Column(
        horizontalAlignment = Alignment.CenterHorizontally,
        modifier = Modifier.clickable(onClick = onClick)
    ) {
        Card(
            modifier = Modifier.size(64.dp),
            colors = CardDefaults.cardColors(
                containerColor = if (isSelected) 
                    MaterialTheme.colorScheme.primaryContainer 
                else 
                    MaterialTheme.colorScheme.surface
            ),
            border = if (isSelected) 
                BorderStroke(2.dp, MaterialTheme.colorScheme.primary)
            else 
                BorderStroke(1.dp, MaterialTheme.colorScheme.outline)
        ) {
            Box(
                contentAlignment = Alignment.Center,
                modifier = Modifier.fillMaxSize()
            ) {
                Icon(
                    painter = painterResource(id = icon),
                    contentDescription = name,
                    tint = if (isSelected) 
                        MaterialTheme.colorScheme.primary 
                    else 
                        MaterialTheme.colorScheme.onSurface
                )
            }
        }
        
        Text(
            text = name,
            style = MaterialTheme.typography.bodySmall,
            color = if (isSelected) 
                MaterialTheme.colorScheme.primary 
            else 
                MaterialTheme.colorScheme.onSurface,
            modifier = Modifier.padding(top = 4.dp)
        )
    }
}

@Composable
fun UsageStatsSection(
    todayUsage: Long,
    platformUsage: Map<String, Long>,
    modifier: Modifier = Modifier
) {
    Card(
        modifier = modifier.fillMaxWidth(),
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surface
        )
    ) {
        Column(
            modifier = Modifier.padding(16.dp)
        ) {
            Text(
                text = "‰ªäÊó•‰ΩøÁî®Êó∂Èïø",
                style = MaterialTheme.typography.titleMedium,
                modifier = Modifier.padding(bottom = 8.dp)
            )
            
            Text(
                text = formatDuration(todayUsage),
                style = MaterialTheme.typography.headlineSmall,
                color = MaterialTheme.colorScheme.primary,
                modifier = Modifier.padding(bottom = 16.dp)
            )
            
            Divider(modifier = Modifier.padding(bottom = 8.dp))
            
            platformUsage.forEach { (platform, duration) ->
                UsageItem(
                    platformName = getPlatformName(platform),
                    duration = duration,
                    modifier = Modifier.padding(vertical = 4.dp)
                )
            }
        }
    }
}

@Composable
fun UsageItem(
    platformName: String,
    duration: Long,
    modifier: Modifier = Modifier
) {
    Row(
        modifier = modifier.fillMaxWidth(),
        horizontalArrangement = Arrangement.SpaceBetween,
        verticalAlignment = Alignment.CenterVertically
    ) {
        Text(
            text = platformName,
            style = MaterialTheme.typography.bodyMedium
        )
        
        Text(
            text = formatDuration(duration),
            style = MaterialTheme.typography.bodyMedium,
            color = MaterialTheme.colorScheme.onSurfaceVariant
        )
    }
}
```

### 2. ÊêúÁ¥¢ÁïåÈù¢ (SearchActivity.kt)

```kotlin
@Composable
fun SearchScreen(
    viewModel: SearchViewModel = viewModel(),
    onBack: () -> Unit,
    onSearchSuccess: () -> Unit
) {
    val uiState by viewModel.uiState.collectAsState()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp)
    ) {
        // È°∂ÈÉ®ÂØºËà™
        TopAppBar(
            title = { Text("ÊêúÁ¥¢") },
            navigationIcon = {
                IconButton(onClick = onBack) {
                    Icon(Icons.Default.ArrowBack, contentDescription = "ËøîÂõû")
                }
            }
        )
        
        Column(
            modifier = Modifier
                .fillMaxWidth()
                .padding(vertical = 16.dp)
        ) {
            // ÊêúÁ¥¢ËæìÂÖ•Ê°Ü
            OutlinedTextField(
                value = uiState.keyword,
                onValueChange = { viewModel.updateKeyword(it) },
                placeholder = { Text("ËØ∑ËæìÂÖ•ÊêúÁ¥¢ÂÖ≥ÈîÆËØç") },
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(bottom = 24.dp),
                singleLine = true,
                keyboardOptions = KeyboardOptions(
                    imeAction = ImeAction.Search
                ),
                keyboardActions = KeyboardActions(
                    onSearch = { viewModel.performSearch() }
                )
            )
            
            // Âπ≥Âè∞ÈÄâÊã©
            Text(
                text = "ÈÄâÊã©ÊêúÁ¥¢Âπ≥Âè∞",
                style = MaterialTheme.typography.titleMedium,
                modifier = Modifier.padding(bottom = 12.dp)
            )
            
            LazyColumn(
                verticalArrangement = Arrangement.spacedBy(8.dp)
            ) {
                items(uiState.availablePlatforms) { platform ->
                    PlatformRadioItem(
                        platform = platform,
                        isSelected = uiState.selectedPlatform == platform.id,
                        onSelected = { viewModel.selectPlatform(platform.id) }
                    )
                }
            }
            
            Spacer(modifier = Modifier.weight(1f))
            
            // ÊêúÁ¥¢ÊåâÈíÆ
            Button(
                onClick = { 
                    viewModel.performSearch()
                    onSearchSuccess()
                },
                modifier = Modifier.fillMaxWidth(),
                enabled = uiState.keyword.isNotBlank() && uiState.selectedPlatform != null,
                colors = ButtonDefaults.buttonColors(
                    containerColor = MaterialTheme.colorScheme.primary
                )
            ) {
                if (uiState.isSearching) {
                    CircularProgressIndicator(
                        modifier = Modifier.size(20.dp),
                        strokeWidth = 2.dp,
                        color = Color.White
                    )
                } else {
                    Text("ÂºÄÂßãÊêúÁ¥¢", color = Color.White)
                }
            }
        }
    }
}

@Composable
fun PlatformRadioItem(
    platform: Platform,
    isSelected: Boolean,
    onSelected: () -> Unit
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .clickable(onClick = onSelected),
        colors = CardDefaults.cardColors(
            containerColor = if (isSelected) 
                MaterialTheme.colorScheme.primaryContainer 
            else 
                MaterialTheme.colorScheme.surface
        ),
        border = if (isSelected) 
            BorderStroke(2.dp, MaterialTheme.colorScheme.primary)
        else 
            BorderStroke(1.dp, MaterialTheme.colorScheme.outline)
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            Icon(
                painter = painterResource(id = platform.icon),
                contentDescription = platform.name,
                tint = if (isSelected) 
                    MaterialTheme.colorScheme.primary 
                else 
                    MaterialTheme.colorScheme.onSurface,
                modifier = Modifier.padding(end = 16.dp)
            )
            
            Text(
                text = platform.name,
                style = MaterialTheme.typography.bodyLarge,
                modifier = Modifier.weight(1f)
            )
            
            RadioButton(
                selected = isSelected,
                onClick = onSelected,
                colors = RadioButtonDefaults.colors(
                    selectedColor = MaterialTheme.colorScheme.primary
                )
            )
        }
    }
}
```

### 3. ÊèêÈÜíÂØπËØùÊ°Ü (ReminderDialog.kt)

```kotlin
@Composable
fun ReminderDialog(
    onDismiss: () -> Unit,
    onContinue: () -> Unit,
    onStop: () -> Unit,
    onDismissForToday: () -> Unit
) {
    AlertDialog(
        onDismissRequest = onDismiss,
        title = {
            Text(
                text = "‰ΩøÁî®ÊèêÈÜí",
                style = MaterialTheme.typography.headlineSmall,
                color = MaterialTheme.colorScheme.primary
            )
        },
        text = {
            Column(
                horizontalAlignment = Alignment.CenterHorizontally,
                modifier = Modifier.padding(16.dp)
            ) {
                Icon(
                    Icons.Default.AccessTime,
                    contentDescription = "Êó∂Èó¥",
                    tint = MaterialTheme.colorScheme.primary,
                    modifier = Modifier
                        .size(48.dp)
                        .padding(bottom = 16.dp)
                )
                
                Text(
                    text = "ÊÇ®Â∑≤‰ΩøÁî®Â∞èÁ∫¢‰π¶30ÂàÜÈíü",
                    style = MaterialTheme.typography.bodyLarge,
                    textAlign = TextAlign.Center,
                    modifier = Modifier.padding(bottom = 8.dp)
                )
                
                Text(
                    text = "Ê≥®ÊÑèÂêàÁêÜ‰ΩøÁî®Êó∂Èó¥",
                    style = MaterialTheme.typography.bodyMedium,
                    color = MaterialTheme.colorScheme.onSurfaceVariant,
                    textAlign = TextAlign.Center,
                    modifier = Modifier.padding(bottom = 16.dp)
                )
                
                Card(
                    colors = CardDefaults.cardColors(
                        containerColor = MaterialTheme.colorScheme.secondaryContainer
                    )
                ) {
                    Text(
                        text = "‰ªäÊó•ÊÄªÊó∂Èïø: 30ÂàÜÈíü",
                        style = MaterialTheme.typography.bodyMedium,
                        modifier = Modifier.padding(8.dp)
                    )
                }
            }
        },
        confirmButton = {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.spacedBy(8.dp)
            ) {
                OutlinedButton(
                    onClick = onStop,
                    modifier = Modifier.weight(1f)
                ) {
                    Text("ÂÅúÊ≠¢‰ΩøÁî®")
                }
                
                Button(
                    onClick = onContinue,
                    modifier = Modifier.weight(1f),
                    colors = ButtonDefaults.buttonColors(
                        containerColor = MaterialTheme.colorScheme.primary
                    )
                ) {
                    Text("ÁªßÁª≠‰ΩøÁî®", color = Color.White)
                }
            }
        },
        dismissButton = {
            TextButton(
                onClick = onDismissForToday,
                modifier = Modifier.fillMaxWidth()
            ) {
                Text("‰ªäÊó•‰∏çÂÜçÊèêÈÜí")
            }
        }
    )
}
```

## üîÑ Áä∂ÊÄÅÁÆ°ÁêÜÊû∂ÊûÑ

### ViewModelËÆæËÆ°

```kotlin
class MainViewModel(
    private val usageRepository: UsageRepository,
    private val settingsRepository: SettingsRepository
) : ViewModel() {
    
    private val _uiState = MutableStateFlow(MainUiState())
    val uiState: StateFlow<MainUiState> = _uiState.asStateFlow()
    
    init {
        // ÁõëÂê¨‰ΩøÁî®Êó∂ÈïøÂèòÂåñ
        viewModelScope.launch {
            usageRepository.todayUsage.collect { usage ->
                _uiState.update { it.copy(todayUsage = usage) }
            }
        }
        
        // ÁõëÂê¨Âπ≥Âè∞‰ΩøÁî®Êó∂Èïø
        viewModelScope.launch {
            usageRepository.platformUsage.collect { usage ->
                _uiState.update { it.copy(platformUsage = usage) }
            }
        }
        
        // Âä†ËΩΩËÆæÁΩÆ
        viewModelScope.launch {
            val settings = settingsRepository.getSettings()
            _uiState.update { it.copy(selectedPlatform = settings.defaultPlatform) }
        }
    }
    
    fun selectPlatform(platform: String) {
        _uiState.update { it.copy(selectedPlatform = platform) }
        viewModelScope.launch {
            settingsRepository.updateDefaultPlatform(platform)
        }
    }
}

data class MainUiState(
    val todayUsage: Long = 0L,
    val platformUsage: Map<String, Long> = emptyMap(),
    val selectedPlatform: String = "xiaohongshu",
    val isLoading: Boolean = false,
    val error: String? = null
)
```

## üéØ ‰∫§‰∫íËÆæËÆ°ÁªÜËäÇ

### 1. ÊâãÂäøÊîØÊåÅ
- **‰∏ãÊãâÂà∑Êñ∞**: ‰∏ªÁïåÈù¢ÊîØÊåÅ‰∏ãÊãâÂà∑Êñ∞‰ΩøÁî®Êï∞ÊçÆ
- **ÈïøÊåâÊìç‰Ωú**: ÈïøÊåâÂπ≥Âè∞ÊåâÈíÆÂèØÂø´ÈÄüÊêúÁ¥¢
- **ÊªëÂä®ËøîÂõû**: ÊâÄÊúâÁïåÈù¢ÊîØÊåÅÊªëÂä®ËøîÂõû

### 2. Âä®ÁîªÊïàÊûú
- **È°µÈù¢ËΩ¨Âú∫**: ‰ΩøÁî®ÂÖ±‰∫´ÂÖÉÁ¥†Âä®Áîª
- **ÊåâÈíÆÂèçÈ¶à**: ÁÇπÂáªÊó∂ÁöÑÊ∂üÊº™ÊïàÊûú
- **Áä∂ÊÄÅÂèòÂåñ**: Âπ≥ÊªëÁöÑËøáÊ∏°Âä®Áîª

### 3. Êó†ÈöúÁ¢çÊîØÊåÅ
- **Â±èÂπïÈòÖËØªÂô®**: ÊâÄÊúâÁªÑ‰ª∂ÈÉΩÊúâÊ≠£Á°ÆÁöÑcontentDescription
- **Â§ßÂ≠ó‰Ωì**: ÊîØÊåÅÁ≥ªÁªüÂ≠ó‰ΩìÂ§ßÂ∞èËÆæÁΩÆ
- **È´òÂØπÊØîÂ∫¶**: ÊîØÊåÅÁ≥ªÁªüÈ´òÂØπÊØîÂ∫¶Ê®°Âºè

### 4. ÂìçÂ∫îÂºèÂ∏ÉÂ±Ä
```kotlin
@Composable
fun ResponsiveLayout(
    content: @Composable () -> Unit
) {
    val configuration = LocalConfiguration.current
    val isPortrait = configuration.orientation == Configuration.ORIENTATION_PORTRAIT
    
    if (isPortrait) {
        // Á´ñÂ±èÂ∏ÉÂ±Ä
        Column(
            modifier = Modifier.fillMaxSize(),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            content()
        }
    } else {
        // Ê®™Â±èÂ∏ÉÂ±Ä
        Row(
            modifier = Modifier.fillMaxSize(),
            horizontalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            content()
        }
    }
}
```

Ëøô‰∏™ÂâçÁ´ØÊû∂ÊûÑËÆæËÆ°Á°Æ‰øù‰∫ÜÔºö
- **ÁïåÈù¢ÁÆÄÊ¥ÅÁõ¥ËßÇ**: Ê†∏ÂøÉÂäüËÉΩ‰∏ÄÁõÆ‰∫ÜÁÑ∂
- **‰∫§‰∫íÊµÅÁïÖ**: ÊâÄÊúâÊìç‰ΩúÈÉΩÊúâÂç≥Êó∂ÂèçÈ¶à
- **‰ª£Á†ÅÁªìÊûÑÊ∏ÖÊô∞**: MVVMÊû∂ÊûÑÔºåÊòì‰∫éÁª¥Êä§
- **Êâ©Â±ïÊÄßÂ•Ω**: ÁªÑ‰ª∂ÂåñËÆæËÆ°Ôºå‰æø‰∫éÊ∑ªÂä†Êñ∞ÂäüËÉΩ
- **Áî®Êà∑‰ΩìÈ™å‰Ω≥**: ËÄÉËôë‰∫ÜÂêÑÁßç‰ΩøÁî®Âú∫ÊôØÂíåËæπÁºòÊÉÖÂÜµ