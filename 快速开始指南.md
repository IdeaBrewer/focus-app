# Focus APP 快速开始指南

## 🎯 本地开发环境搭建

### 1. 环境要求
- **Android Studio**: Arctic Fox 或更新版本
- **JDK**: 17 或更新版本
- **Android SDK**: API 24 (Android 7.0) 或更新版本
- **Git**: 最新版本

### 2. 安装步骤

#### 步骤1: 克隆项目
```bash
# 克隆项目到本地
git clone https://github.com/your-username/focus-app.git
cd focus-app

# 查看项目结构
ls -la
```

#### 步骤2: 打开Android Studio
```bash
# 使用Android Studio打开项目
# 方法1: 命令行打开
open -a "Android Studio" .

# 方法2: 在Android Studio中选择 "Open an existing project"
# 然后选择 focus-app 文件夹
```

#### 步骤3: 等待项目同步
- Android Studio会自动检测项目结构
- 等待Gradle同步完成（可能需要几分钟）
- 如果有错误，检查网络连接和代理设置

#### 步骤4: 配置模拟器或连接设备

**选项A: 创建模拟器**
```bash
# 在Android Studio中:
# 1. Tools > AVD Manager
# 2. Create Virtual Device
# 3. 选择设备型号 (推荐 Pixel 4 或更新)
# 4. 选择系统镜像 (推荐 API 34)
# 5. 完成创建并启动模拟器
```

**选项B: 连接真实设备**
```bash
# 启用开发者选项和USB调试
# 1. 在设备上: 设置 > 关于手机 > 连续点击版本号7次
# 2. 返回设置 > 开发者选项 > 启用USB调试
# 3. 用USB线连接电脑和设备
# 4. 在设备上允许USB调试

# 验证连接
adb devices
# 应该显示你的设备
```

### 3. 构建和运行

#### 方法1: Android Studio
```bash
# 1. 选择构建变体 (Build > Select Build Variant)
#    - debug: 调试版本
#    - release: 发布版本

# 2. 点击运行按钮 (绿色播放图标)
#    或使用快捷键: Ctrl+R (Windows/Linux) 或 Control+R (Mac)
```

#### 方法2: 命令行
```bash
# 授权gradlew
chmod +x gradlew

# 清理项目
./gradlew clean

# 构建项目
./gradlew build

# 运行单元测试
./gradlew test

# 构建Debug APK
./gradlew assembleDebug

# 安装到设备
./gradlew installDebug

# 启动应用
adb shell am start -n com.focus.app/.MainActivity
```

## 🚀 GitHub Actions 使用指南

### 1. 自动构建APK

#### 触发条件
- **Debug APK**: 推送到 `main` 或 `develop` 分支
- **Release APK**: 创建GitHub Release

#### 获取APK
```bash
# 1. 进入GitHub仓库页面
# 2. 点击 "Actions" 标签
# 3. 选择左侧的工作流
# 4. 查看构建历史
# 5. 点击成功的构建
# 6. 在 "Artifacts" 部分下载APK
```

### 2. 本地测试GitHub Actions

#### 测试构建流程
```bash
# 安装act (GitHub Actions本地测试工具)
# macOS: brew install act
# Linux: 参考 https://github.com/nektos/act

# 运行构建工作流
act -W .github/workflows/build.yml

# 运行测试工作流
act -W .github/workflows/test.yml
```

## 🔧 开发工作流程

### 1. 功能开发流程

#### 步骤1: 创建分支
```bash
# 切换到develop分支
git checkout develop

# 拉取最新代码
git pull origin develop

# 创建功能分支
git checkout -b feature/your-feature-name
```

#### 步骤2: 开发功能
```bash
# 编写代码
# 编写测试
# 运行本地测试
./gradlew test

# 构建验证
./gradlew assembleDebug
```

#### 步骤3: 提交代码
```bash
# 添加文件到暂存区
git add .

# 提交代码
git commit -m "feat: add new feature"

# 推送到远程
git push origin feature/your-feature-name
```

#### 步骤4: 创建Pull Request
```bash
# 1. 在GitHub上创建PR
# 2. 选择目标分支: develop
# 3. 填写PR描述
# 4. 等待CI构建
# 5. 等待代码审查
# 6. 合并PR
```

### 2. 发布流程

#### 步骤1: 准备发布
```bash
# 切换到main分支
git checkout main

# 拉取最新代码
git pull origin main

# 合并develop分支
git merge origin/develop

# 更新版本号
# 编辑 app/build.gradle.kts 中的 versionCode 和 versionName
```

#### 步骤2: 创建标签
```bash
# 创建标签
git tag -a v1.0.0 -m "Version 1.0.0"

# 推送标签
git push origin v1.0.0
```

#### 步骤3: 创建Release
```bash
# 1. 在GitHub上创建Release
# 2. 选择标签 v1.0.0
# 3. 填写发布说明
# 4. 上传附件（可选）
# 5. 发布Release
```

## 📱 测试指南

### 1. 单元测试
```bash
# 运行所有单元测试
./gradlew test

# 运行特定模块的测试
./gradlew :app:test

# 生成测试报告
./gradlew testDebugUnitTest
```

### 2. 集成测试
```bash
# 运行Android测试
./gradlew connectedAndroidTest

# 运行特定设备的测试
./gradlew connectedCheck
```

### 3. UI测试
```bash
# 运行UI测试
./gradlew connectedAndroidTest

# 生成覆盖率报告
./gradlew createDebugCoverageReport
```

## 🔍 常见问题解决

### 1. Gradle同步失败
```bash
# 清理Gradle缓存
./gradlew clean
./gradlew --refresh-dependencies

# 检查网络连接
# 确保可以访问 Google Maven 仓库
```

### 2. 构建失败
```bash
# 检查JDK版本
java -version
# 确保是JDK 17

# 检查Android SDK
# 在Android Studio中: Tools > SDK Manager
# 确保安装了API 24+
```

### 3. 设备连接问题
```bash
# 重启adb
adb kill-server
adb start-server

# 检查设备连接
adb devices

# 重新授权USB调试
# 在设备上重新启用USB调试
```

### 4. 权限问题
```bash
# 检查文件权限
ls -la gradlew

# 重新授权
chmod +x gradlew
```

## 📚 进一步学习

### 官方文档
- [Android Developers](https://developer.android.com/)
- [Jetpack Compose](https://developer.android.com/jetpack/compose)
- [Kotlin Documentation](https://kotlinlang.org/docs/home.html)

### 推荐工具
- **Android Studio**: 官方IDE
- **GitHub Desktop**: Git图形界面工具
- **Postman**: API测试工具
- **Genymotion**: Android模拟器

### 社区资源
- [Stack Overflow](https://stackoverflow.com/)
- [Reddit r/androiddev](https://www.reddit.com/r/androiddev/)
- [Android Developers Blog](https://android-developers.googleblog.com/)

---

祝您开发愉快！如有问题，请随时提交Issue或联系开发团队。